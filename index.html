<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>GifTastic</title>
</head>
<body>
	<h1> NFL TEAMS </h1>

<div id="teamBtn"></div><br>


 <form id="team-form">
      <label for="team-input">Add Your Favorite Team</label>
      <input type="text" id="team-input"><br>

      <!-- Button triggers new team to be added -->
      <br><input id="add-team" type="submit" value="Add Team">
    </form>

<div id="results"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
	
var topics = ["Carolina Panthers", "Atlanta Falcons", "Pittsburgh Steelers", "Washington Redskins", "Seattle Seahawks", "Kansas City Chiefs"];

function displayTeams (){


	$("button").on("click", function (){

		var team = $(this).attr("data-name");

		var queryURL = "https://api.giphy.com/v1/gifs/search?api_key=YumuHyK51v32US9X2c1t8jtLqEyx1C7Z&q=" + team + "&limit=10&offset=0&rating=PG&lang=en"


		$.ajax({
			url: queryURL,
			method: "GET"
		}).done(function(response){
			console.log(response);

			var results = response.data;

				for (var i = 0; i < results.length; i++) {

					if(results[i].rating !== "r" && results[i].rating !== "pg-13"){
						var newDiv = $("<div class='team'>");

						var rating = results[i].rating;
						var p = $("<p>").text("Rating: " + rating);
						newDiv.append(p);

						var image = $("<img>");
						image.attr("src", results[i].images.fixed_height_still.url);

						newDiv.append(p);
						newDiv.append(image);

						$("#results").prepend(newDiv);



					}
				}

		})
	});
}

// Creating Buttons for array and new ones
function renderButtons(){
	$("#teamBtn").empty();

	for (var i = 0; i < topics.length; i++) {
		var a = $("<button>");

		a.addClass("team");
		a.attr("data-name", topics[i]);
		a.text(topics[i]);
		$("#teamBtn").append(a);

	}
}

	$("#add-team").on("click", function(event){
		event.preventDefault();

		var newTeam = $("#team-input").val().trim();

		topics.push(newTeam);

		renderButtons();
	});

	$(document).on("click", ".team", displayTeams);

	renderButtons();





</script>
	
</body>
</html>